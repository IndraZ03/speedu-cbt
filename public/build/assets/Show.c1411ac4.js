import{L as k}from"./Layout.db7d06d0.js";import{L as h,H as w,j as T,c as o,a as b,w as d,b as s,d as x,e as i,K as S,F as m,r as f,h as v,f as y,o as e,t as r,g}from"./app.c4f63ac8.js";import{S as L}from"./sweetalert2.esm.all.08ba7c87.js";import{_ as P}from"./_plugin-vue_export-helper.cdc0426e.js";const K={layout:k,components:{Link:h,Head:w},props:{errors:Object,transaction:Object,banks:Object},setup(n){const t=T({payment_method:""});return{form:t,submit:()=>{v.Inertia.post(`/user/vouchers/${n.voucher.id}/buy`,{payment_method:t.payment_method},{onSuccess:()=>{L.fire({title:"Success!",text:"Silakan Lakukan Pembayaran",icon:"success",showConfirmButton:!1,timer:1e3})}})},pay:()=>{window.snap.pay(n.transaction.snap_token,{onSuccess:()=>{v.Inertia.post("/user/transactions/pay",{transaction_id:n.transaction.id,payment_method:"automatic_transfer_midtrans"})},onPending:()=>{this.$inertia.visit($page.props.setting.app_url)},onError:()=>{this.$inertia.visit($page.props.setting.app_url)}})}}},methods:{formatPrice(n){return"Rp."+(n/1).toFixed(2).replace(".",",").toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}}},H={class:"page-wrapper"},M={class:"page-content"},B={class:"row"},C={class:"col-lg-12"},D={key:0,class:"alert alert-danger border-0 alert-dismissible fade show"},N=["innerHTML"],j={key:1,class:"alert alert-danger border-0 alert-dismissible fade show"},V=["innerHTML"],A={key:2,class:"alert alert-success border-0 alert-dismissible fade show"},O=["innerHTML"],E={class:"col-lg-12"},F={class:"card border-top border-0 border-3 border-primary"},I={class:"card-header"},R={class:"d-lg-flex align-items-center"},G={class:"ms-auto"},J={class:"card-body p-4"},U={class:"row mb-3"},W={class:"col-sm-9"},q=["value"],z={class:"row mb-3"},Q={class:"col-sm-9"},X=["value"],Y={class:"row mb-3"},Z={class:"col-sm-9"},$=["value"],ss={class:"row mb-3"},ts={class:"col-sm-9"},as=["value"],es={class:"row mb-3"},os={class:"col-sm-9"},ns=["value"],ls={class:"row mb-3"},is={class:"col-sm-9"},rs=["value"],cs={class:"row mb-3"},ds={class:"col-sm-9"},ms=["value"],us={class:"row mb-3"},_s={class:"col-sm-9"},bs={class:"badge bg-success m-1"},fs={key:1,class:"badge bg-success"},vs={class:"row mb-3"},ys={class:"col-sm-9"},gs={class:"form-select",disabled:"",style:{"background-color":"#fff"}},ps=["selected"],ks=["selected"],hs=["selected"],ws={class:"row mb-3"},Ts={class:"col-sm-9"},xs=["value"],Ss={class:"row mb-3"},Ls={class:"col-sm-9"},Ps={key:0,class:"fw-bold"},Ks={key:1,class:"fw-bold"},Hs={key:2,class:"fw-bold"},Ms={key:3,class:"fw-bold"},Bs={key:4,class:"fw-bold"},Cs={key:0,class:"row mb-3"},Ds={class:"col-sm-9"},Ns={key:1},js={class:"row mb-3"},Vs={class:"col-sm-9"},As=["value"],Os={class:"row mb-3"},Es={class:"col-sm-9"},Fs=["value"],Is={class:"row mb-3"},Rs={class:"col-sm-9"},Gs=["value"],Js={class:"row mb-3"},Us={class:"col-sm-9"},Ws=["value"],qs={class:"row mb-3"},zs={class:"col-sm-9"},Qs=["src"],Xs={key:2,class:"row"},Ys={class:"col-lg-12"},Zs={class:"row row-cols-1 row-cols-md-2 row-cols-lg-3 row-cols-xl-3 g-4"},$s={class:"col"},st={class:"card h-100 shadow-sm"},tt={class:"card-body d-flex flex-column p-4"},at={class:"text-center mb-4"},et=["src","alt"],ot={class:"text-center mt-auto"},nt={class:"card-title mb-3 fw-bold"},lt={class:"card-text mb-2 text-muted"},it={class:"card-text mb-0 fw-semibold"};function rt(n,t,a,c,ct,u){const p=y("Head"),_=y("Link");return e(),o(m,null,[b(p,null,{default:d(()=>{var l;return[s("title",null,`
            `+r((l=n.$page.props.setting.app_name)!=null?l:"Atur Setting Terlebih Dahulu")+`
            - Transaksi
        `,1)]}),_:1}),s("div",H,[s("div",M,[t[28]||(t[28]=x('<div class="page-breadcrumb d-none d-sm-flex align-items-center mb-3"><div class="breadcrumb-title pe-3">Transaksi</div><div class="ps-3"><nav aria-label="breadcrumb"><ol class="breadcrumb mb-0 p-0"><li class="breadcrumb-item"><a href="javascript:;"><i class="bx bx-home-alt"></i></a></li><li class="breadcrumb-item active" aria-current="page"> Detail Transaksi </li></ol></nav></div></div>',1)),s("div",B,[s("div",C,[n.$page.props.session.failed?(e(),o("div",D,[s("div",{innerHTML:n.$page.props.session.failed},null,8,N),t[1]||(t[1]=s("button",{type:"button",class:"btn-close","data-bs-dismiss":"alert","aria-label":"Close"},null,-1))])):i("",!0),n.$page.props.session.error?(e(),o("div",j,[s("div",{innerHTML:n.$page.props.session.error},null,8,V),t[2]||(t[2]=s("button",{type:"button",class:"btn-close","data-bs-dismiss":"alert","aria-label":"Close"},null,-1))])):i("",!0),n.$page.props.session.success?(e(),o("div",A,[s("div",{innerHTML:n.$page.props.session.success},null,8,O),t[3]||(t[3]=s("button",{type:"button",class:"btn-close","data-bs-dismiss":"alert","aria-label":"Close"},null,-1))])):i("",!0)]),s("div",E,[s("div",F,[s("div",I,[s("div",R,[s("div",G,[a.transaction.transaction_status=="pending"&&a.transaction.payment_method=="manual_transfer"?(e(),S(_,{key:0,href:`/user/transactions/${a.transaction.id}/payment-confirmations`,class:"btn btn-danger btn-sm mt-lg-0 mx-1"},{default:d(()=>t[4]||(t[4]=[g("Konfirmasi Pembayaran")])),_:1,__:[4]},8,["href"])):i("",!0),b(_,{href:"/user/transactions",class:"btn btn-primary btn-sm mt-lg-0"},{default:d(()=>t[5]||(t[5]=[g("Kembali ")])),_:1,__:[5]})])])]),s("div",J,[t[26]||(t[26]=s("h5",{class:"mb-3"},"Data Pembeli",-1)),s("div",U,[t[6]||(t[6]=s("label",{class:"col-sm-3 col-form-label"},"Nama Lengkap",-1)),s("div",W,[s("input",{type:"text",class:"form-control",value:a.transaction.user.name,disabled:"",style:{"background-color":"#fff"}},null,8,q)])]),s("div",z,[t[7]||(t[7]=s("label",{class:"col-sm-3 col-form-label"},"Email",-1)),s("div",Q,[s("input",{type:"text",class:"form-control",value:a.transaction.user.email,disabled:"",style:{"background-color":"#fff"}},null,8,X)])]),s("div",Y,[t[8]||(t[8]=s("label",{class:"col-sm-3 col-form-label"},"Nomor Telepon (Whatsapp)",-1)),s("div",Z,[s("input",{type:"text",class:"form-control",value:a.transaction.user.student&&a.transaction.user.student.phone_number?a.transaction.user.student.phone_number:"-",disabled:"",style:{"background-color":"#fff"}},null,8,$)])]),t[27]||(t[27]=s("h5",{class:"mb-3"},"Detail Transaksi",-1)),s("div",ss,[t[9]||(t[9]=s("label",{class:"col-sm-3 col-form-label"},"Kode Transaksi",-1)),s("div",ts,[s("input",{type:"text",class:"form-control",value:a.transaction.code,disabled:"",style:{"background-color":"#fff"}},null,8,as)])]),s("div",es,[t[10]||(t[10]=s("label",{class:"col-sm-3 col-form-label"},"Tanggal Transaksi",-1)),s("div",os,[s("input",{type:"text",class:"form-control",value:a.transaction.created_at,disabled:"",style:{"background-color":"#fff"}},null,8,ns)])]),s("div",ls,[t[11]||(t[11]=s("label",{class:"col-sm-3 col-form-label"},"Kategori Peminatan",-1)),s("div",is,[s("input",{type:"text",class:"form-control",value:a.transaction.category.name,disabled:"",style:{"background-color":"#fff"}},null,8,rs)])]),s("div",cs,[t[12]||(t[12]=s("label",{class:"col-sm-3 col-form-label"},"Deskripsi Transaksi",-1)),s("div",ds,[s("input",{type:"text",class:"form-control",value:a.transaction.description,disabled:"",style:{"background-color":"#fff"}},null,8,ms)])]),s("div",us,[t[13]||(t[13]=s("label",{class:"col-sm-3 col-form-label"},"Kategori Member",-1)),s("div",_s,[a.transaction.member_categories?(e(!0),o(m,{key:0},f(a.transaction.member_categories,l=>(e(),o("span",bs,r(l),1))),256)):(e(),o("span",fs,"Untuk Seluruh Kategori Member"))])]),s("div",vs,[t[14]||(t[14]=s("label",{class:"col-sm-3 col-form-label"},"Metode Pembayaran",-1)),s("div",ys,[s("select",gs,[s("option",{value:"account_balance",selected:a.transaction.payment_method=="account_balance"}," Saldo Akun ",8,ps),s("option",{value:"manual_transfer",selected:a.transaction.payment_method=="manual_transfer"}," Transfer Manual (Konfirmasi Pembayaran) ",8,ks),s("option",{value:"automatic_transfer_midtrans",selected:a.transaction.payment_method=="automatic_transfer_midtrans"}," Transfer Otomatis ",8,hs)])])]),s("div",ws,[t[15]||(t[15]=s("label",{class:"col-sm-3 col-form-label"},"Total Transaksi",-1)),s("div",Ts,[s("input",{type:"text",class:"form-control",value:u.formatPrice(a.transaction.total_payment),disabled:"",style:{"background-color":"#fff"}},null,8,xs)])]),s("div",Ss,[t[16]||(t[16]=s("label",{class:"col-sm-3 col-form-label"},"Status Transaksi",-1)),s("div",Ls,[a.transaction.transaction_status=="pending"?(e(),o("span",Ps,"Pending - Belum melakukan pembayaran")):i("",!0),a.transaction.transaction_status=="paid"?(e(),o("span",Ks,"Telah melakukan pembayaran")):i("",!0),a.transaction.transaction_status=="failed"?(e(),o("span",Hs,"Transaksi Gagal")):i("",!0),a.transaction.transaction_status=="done"?(e(),o("span",Ms,"Transaksi Selesai")):i("",!0),a.transaction.transaction_status=="expired"?(e(),o("span",Bs,"Transaksi Kadaluarsa")):i("",!0)])]),a.transaction.payment_method=="automatic_transfer_midtrans"&&a.transaction.transaction_status=="pending"?(e(),o("div",Cs,[t[17]||(t[17]=s("label",{class:"col-sm-3 col-form-label"},"Action",-1)),s("div",Ds,[s("button",{onClick:t[0]||(t[0]=(...l)=>c.pay&&c.pay(...l)),class:"btn btn-primary btn-sm"}," Bayar Transaksi Sekarang ")])])):i("",!0),a.transaction.payment_method=="manual_transfer"&&a.transaction.payment_confirmation?(e(),o("div",Ns,[t[23]||(t[23]=s("h5",{class:"mb-3"},"Data Konfirmasi Pembayaran",-1)),s("div",js,[t[18]||(t[18]=s("label",{class:"col-sm-3 col-form-label"},"Nama Pengirim Transfer",-1)),s("div",Vs,[s("input",{type:"text",class:"form-control",value:a.transaction.payment_confirmation.rekening_name,disabled:"",style:{"background-color":"#fff"}},null,8,As)])]),s("div",Os,[t[19]||(t[19]=s("label",{class:"col-sm-3 col-form-label"},"Di Transfer Ke Rekening",-1)),s("div",Es,[s("input",{type:"text",class:"form-control",value:a.transaction.payment_confirmation.bank.bank_name+" - "+a.transaction.payment_confirmation.bank.rekening_number+" - "+a.transaction.payment_confirmation.bank.rekening_name,disabled:"",style:{"background-color":"#fff"}},null,8,Fs)])]),s("div",Is,[t[20]||(t[20]=s("label",{class:"col-sm-3 col-form-label"},"Tanggal Transfer",-1)),s("div",Rs,[s("input",{type:"text",class:"form-control",value:a.transaction.payment_confirmation.transfer_date,disabled:"",style:{"background-color":"#fff"}},null,8,Gs)])]),s("div",Js,[t[21]||(t[21]=s("label",{class:"col-sm-3 col-form-label"},"Jumlah Transfer",-1)),s("div",Us,[s("input",{type:"text",class:"form-control",value:u.formatPrice(a.transaction.payment_confirmation.total_payment),disabled:"",style:{"background-color":"#fff"}},null,8,Ws)])]),s("div",qs,[t[22]||(t[22]=s("label",{class:"col-sm-3 col-form-label"},"Bukti Transfer",-1)),s("div",zs,[s("img",{src:"/storage/upload_files/payment_confirmation/"+a.transaction.payment_confirmation.file,style:{width:"300px"}},null,8,Qs)])])])):i("",!0),a.transaction.payment_method=="manual_transfer"&&a.transaction.transaction_status=="pending"?(e(),o("div",Xs,[s("div",Ys,[t[24]||(t[24]=s("h6",{class:"text-center"}," Silakan lakukan pembayaran melalui rekening berikut ini dan lakukan konfirmasi ",-1)),t[25]||(t[25]=s("br",null,null,-1)),s("div",Zs,[(e(!0),o(m,null,f(a.banks,l=>(e(),o("div",$s,[s("div",st,[s("div",tt,[s("div",at,[s("img",{src:"/storage/upload_files/banks/"+l.image,class:"img-fluid",style:{"max-height":"75px","max-width":"125px","object-fit":"contain"},alt:l.bank_name},null,8,et)]),s("div",ot,[s("h6",nt,r(l.bank_name),1),s("p",lt,r(l.rekening_number),1),s("p",it,r(l.rekening_name),1)])])])]))),256))])])])):i("",!0)])])])])])])],64)}const bt=P(K,[["render",rt]]);export{bt as default};
