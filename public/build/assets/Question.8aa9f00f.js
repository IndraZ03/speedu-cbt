import{L as z,i as Y}from"./vue-countdown.esm.d853c48e.js";import{p as F,e as q,t as P}from"./index.es.9e4ba355.js";import{a as N}from"./index.2321b908.js";import{H as G,L as W,z as _,c as o,a as S,w as T,b as a,n as w,t as m,e as r,F as y,r as v,g as C,h as A,f as J,o as i}from"./app.5a3a2595.js";import{S as x}from"./sweetalert2.esm.all.36649896.js";import{w as X}from"./wrapLatex.6db58403.js";import{_ as Z}from"./_plugin-vue_export-helper.cdc0426e.js";const p={layout:z,components:{Head:G,Link:W,VueCountdown:Y,MathJax:F},props:{id:String,page:Number,exam:Object,duration:Object,questionLists:Object,section:Number,lastSection:Number,grade:Object,indexPage:Object},mounted(){let d=document.createElement("script");d.setAttribute("src","https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"),document.head.appendChild(d);function e(){const n=document.getElementById("elementId");P(n)}q({},e),this.$nextTick(()=>{window.MathJax&&window.MathJax.Hub&&window.MathJax.Hub.Queue(["Typeset",window.MathJax.Hub])})},setup(d){var e,n=localStorage.getItem("indexPage");n!==null?e=_(n):e=_(d.indexPage);let t=["A","B","C","D","E"];d.exam.id!=localStorage.getItem("examId")&&(localStorage.setItem("examId",d.exam.id),localStorage.setItem("myAnswers",[]));const E=localStorage.getItem("myAnswers");let b=E?JSON.parse(E):[];localStorage.setItem("myAnswers",JSON.stringify(b)),localStorage.setItem("examId",d.exam.id);const f=_(0),k=_(d.duration),s=()=>{k.value=k.value-1e3,f.value=f.value+1},l=()=>{let u=document.createElement("script");u.setAttribute("src","https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"),document.head.appendChild(u);function c(){const g=document.getElementById("elementId");P(g)}q({},c)},h=()=>{l(),e.value=parseInt(e.value)-1},B=()=>{l(),e.value=parseInt(e.value)+1},H=u=>{l(),e.value=u},I=()=>{if(d.grade.is_blocked!=1){let u=parseInt(d.grade.total_tolerance)>0?parseInt(d.grade.total_tolerance)-1:0,c=u==0?"Tolerasi habis, ":"Toleransi Tersisa "+u+" kali lagi, ";x.fire({title:"UJIAN AKAN DI DIBLOKIR JIKA ANDA MENINGGAL SESI UJIAN",text:c+" jika toleransi habis anda tidak dapat melanjutkan ujian dan harus menghubungi admin",icon:"warning",showCancelButton:!1,confirmButtonColor:"#d33",cancelButtonColor:"#d33",confirmButtonText:"Mengerti",allowOutsideClick:!1}).then(g=>{g.isConfirmed&&A.Inertia.post(`/user/exam-groups/${d.exam.id}/decrement-tolerance`,{grade_id:d.grade.id},{onSuccess:()=>{location.reload()}})})}},D=u=>{const c=b.find(g=>g.question_id===u);return c?c.answer:0};let O=0;const Q=(u,c)=>{const g={question_id:u,answer:c},j=b.findIndex(L=>L.question_id===g.question_id);j!==-1?b[j].answer=g.answer:b.push(g);try{O%20===0&&M(),localStorage.setItem("indexPage",e.value),localStorage.setItem("myAnswers",JSON.stringify(b)),O++,e.value<Object.keys(d.questionLists).length-1&&B()}catch(L){x.fire({title:"Error",text:"Submit Jawaban Error, silakan lakukan refresh dan pastikan perangkat terhubungan dengan jaringan."+L,icon:"error",showCancelButton:!1,confirmButtonText:"Refresh",allowOutsideClick:!1}).then(V=>{V.isConfirmed&&location.reload()})}},R=_(!1),K=_(!1),M=()=>{N.get("/check-connection").then(u=>{console.log("ada")}).catch(u=>{x.fire({title:"Error",text:`Submit Jawaban Error, silakan lakukan refresh dan pastikan perangkat terhubungan dengan jaringan.
`+u,icon:"error",showCancelButton:!1,confirmButtonText:"Refresh",allowOutsideClick:!1}).then(c=>{c.isConfirmed&&location.reload()})})},U=(u="")=>{M(),d.section==d.lastSection||u=="block"?A.Inertia.post(`/user/exam-groups/${d.exam.id}/exam-end`,{exam_id:d.exam.id,grade_id:d.grade.id,myAnswers:b},{onSuccess:()=>{u=="block"?x.fire({title:"UJIAN DIBLOKIR KARENA SUDAH MELEWATI BATAS TOLERANSI.",text:"Anda tidak dapat melanjutkan ujian, silakan hubungi admin",icon:"warning",showCancelButton:!1,confirmButtonColor:"#d33",confirmButtonText:"Mengerti",allowOutsideClick:!1}).then(c=>{c.isConfirmed&&location.reload()}):(localStorage.removeItem("indexPage"),x.fire({title:"Success..",text:"Ujian Anda Selesai, Semoga Mendapatkan Nilai Terbaik.",icon:"success",showCancelButton:!1,confirmButtonText:"Tutup",allowOutsideClick:!1}).then(c=>{c.isConfirmed&&location.reload()}))}}):(A.Inertia.get(`/user/exam-groups/${d.exam.id}/grades/${d.grade.id}/sections/${d.section+1}?nextsection=1`),localStorage.removeItem("indexPage"),x.fire({title:"Success!",text:"Lanjut Ke Kolom Berikutnya.",icon:"success",showConfirmButton:!1,timer:1e3}))};return d.exam.total_tolerance!=null&&window.addEventListener("blur",I),d.grade.is_blocked==1&&x.fire({title:"Ujian di Blokir",text:"Masukan Kode Untuk Membuka Blokir",input:"password",icon:"error",inputAttributes:{autocapitalize:"off"},showCancelButton:!1,allowOutsideClick:!1,confirmButtonText:"Buka Blokir",showLoaderOnConfirm:!0,preConfirm:u=>{N.get(`/user/exam-groups/${d.exam.id}/grades/${d.grade.id}/unblocked`,{params:{token:u}}).then(c=>{c.data.success==!0?x.fire({title:"Blokir Berhasil Dibuka",text:"Silakan Lanjut Mengerjakan Soal.",icon:"success",showCancelButton:!1,confirmButtonText:"Oke",allowOutsideClick:!1}).then(g=>{g.isConfirmed&&location.reload()}):x.fire({title:"Gagal",text:c.data.message,icon:"error",showCancelButton:!1,confirmButtonText:"Ulangi",allowOutsideClick:!1}).then(g=>{g.isConfirmed&&location.reload()})}).catch(c=>{console.error("Request failed:",c),x.showValidationMessage(`Request failed: ${c}`)})}}),{indexPage:e,options:t,duration:k,handleChangeDuration:s,prevPage:h,nextPage:B,clickQuestion:H,submitAnswer:Q,getMyAnswer:D,showModalEndExam:R,showModalEndTimeExam:K,endExam:U,confirm:I,checkConnection:M,loadMath:l}},methods:{transform(d){return Object.entries(d).forEach(([e,n])=>{const t=n<10?`0${n}`:n;d[e]=`${t}`}),d},wrapLatexInText:X},computed:{processedQuestion(){var e;const d=((e=this.questionLists[this.indexPage])==null?void 0:e.question)||"";return this.wrapLatexInText(d)},processedOptions(){const d={},e=this.questionLists[this.indexPage]||{};return e&&(e.answer_order||"").split(",").forEach(n=>{d[n]=this.wrapLatexInText(e["option_"+n]||"")}),d}},watch:{indexPage(){this.$nextTick(()=>{window.MathJax&&window.MathJax.Hub&&window.MathJax.Hub.Queue(["Typeset",window.MathJax.Hub])})}}},$={class:"container",style:{"margin-top":"20px","margin-bottom":"20px"}},tt={class:"row"},et={class:"card"},nt={class:"card-header bg-primary mb-3"},at={class:"d-flex justify-content-between"},ot={class:"text-start"},it={key:0},st={class:"mb-0 text-white"},dt={class:"badge"},lt={class:"text-end"},rt={class:"mb-0 text-white"},ct={key:0,class:"badge"},ut={key:1,class:"badge"},mt={class:"card-body"},ht={key:0},gt=["innerHTML"],bt={key:0},xt={width:"50",style:{padding:"10px"}},kt=["onClick"],_t=["onClick"],yt={style:{padding:"10px"}},ft=["innerHTML"],wt={key:1},vt={width:"30"},Ct=["innerHTML"],Et={key:1},Mt={key:0,class:"mt-3 mb-3 m-3"},Lt=["onClick"],St=["onClick"],Tt={class:"card-footer",style:{"min-height":"60px"}},At={class:"d-flex justify-content-center"},Bt={class:"text-start"},It={key:0},Ot={key:0,class:"text-center"},jt={key:0},qt={key:1},Pt={class:"card"},Nt={class:"card-body",style:{height:"480px","overflow-y":"auto"}},Jt={style:{width:"20%",float:"left"}},Ht={style:{padding:"2px"}},Dt=["onClick"],Qt={style:{"font-size":"11px","font-weight":"500"}},Rt=["onClick"],Kt={style:{"font-size":"11px","font-weight":"500"}},Ut=["onClick"],Vt={style:{"font-size":"11px","font-weight":"500"}},zt={class:"card-footer",style:{"min-height":"60px"}},Yt={key:0},Ft={key:1},Gt={class:"modal-dialog"},Wt={class:"modal-content"},Xt={class:"modal-footer"},Zt={class:"modal-dialog"},pt={class:"modal-content"},$t={class:"modal-header"},te={key:0,class:"modal-title"},ee={key:1,class:"modal-title"},ne={class:"modal-body"},ae={key:0},oe={key:1},ie={class:"text-center"},se={class:"mb-0 text-white"},de={class:"badge bg-danger"},le={key:0,class:"modal-footer"};function re(d,e,n,t,E,b){const f=J("Head"),k=J("VueCountdown");return i(),o(y,null,[S(f,null,{default:T(()=>{var s;return[a("title",null,`
            `+m((s=d.$page.props.setting.app_name)!=null?s:"Atur Setting Terlebih Dahulu")+`
            - Try Out
        `,1)]}),_:1}),a("div",$,[a("div",tt,[a("div",{class:w(["col-md-12 col-sm-12 col-xs-12",n.exam.show_question_number_navigation==1?"col-lg-8":"col-lg-12"])},[a("div",et,[a("div",nt,[a("div",at,[a("div",ot,[n.exam.show_question_number==1?(i(),o("div",it,[a("h4",st,[a("span",dt,"No. "+m(n.questionLists[t.indexPage].navigation_order),1)])])):r("",!0)]),a("div",lt,[S(k,{transform:b.transform,time:t.duration,onProgress:t.handleChangeDuration,onEnd:e[0]||(e[0]=s=>t.showModalEndTimeExam=!0)},{default:T(({hours:s,minutes:l,seconds:h})=>[a("h4",rt,[n.exam.duration>=60?(i(),o("span",ct,m(s)+" : "+m(l)+" : "+m(h),1)):(i(),o("span",ut,m(l)+" : "+m(h),1))])]),_:1},8,["transform","time","onProgress"])])])]),a("div",mt,[n.questionLists[t.indexPage]?(i(),o("div",ht,[a("div",null,[a("div",{innerHTML:b.processedQuestion,class:"prevent-select"},null,8,gt)]),a("table",null,[n.exam.type_option==1?(i(),o("tbody",bt,[(i(!0),o(y,null,v(n.questionLists[t.indexPage].answer_order.split(","),(s,l)=>(i(),o("tr",{key:l},[a("span",null,[a("td",xt,[s==t.getMyAnswer(n.questionLists[t.indexPage].question_id)?(i(),o("button",{key:0,onClick:h=>t.submitAnswer(n.questionLists[t.indexPage].question_id,s),class:"btn btn-danger text-white"},m(t.options[l]),9,kt)):(i(),o("button",{key:1,onClick:h=>t.submitAnswer(n.questionLists[t.indexPage].question_id,s),class:"btn btn-outline-primary w-100 no-click-effect"},m(t.options[l]),9,_t))]),a("td",yt,[n.exam.show_answer==1?(i(),o("p",{key:0,class:"prevent-select",innerHTML:b.processedOptions[s]},null,8,ft)):r("",!0)])])]))),128))])):r("",!0),n.exam.type_option==2?(i(),o("tbody",wt,[n.exam.show_answer==1?(i(!0),o(y,{key:0},v(n.questionLists[t.indexPage].answer_order.split(","),(s,l)=>(i(),o("tr",{key:l},[a("td",vt,[a("p",null,m(t.options[l])+".",1)]),a("td",null,[a("p",{innerHTML:b.processedOptions[s]},null,8,Ct)])]))),128)):r("",!0)])):r("",!0)])])):(i(),o("div",Et,e[14]||(e[14]=[a("div",{class:"alert alert-danger border-0 shadow"},[a("i",{class:"fa fa-exclamation-triangle"}),C(" Question Not Found!. ")],-1)])))]),n.exam.type_option==2?(i(),o("div",Mt,[(i(!0),o(y,null,v(n.questionLists[t.indexPage].answer_order.split(","),(s,l)=>(i(),o("span",{key:l},[s==t.getMyAnswer(n.questionLists[t.indexPage].question_id)?(i(),o("button",{key:0,onClick:h=>t.submitAnswer(n.questionLists[t.indexPage].question_id,s),class:"btn btn-secondary text-dark px-lg-5 px-md-5 mb-1 mx-1 rounded-3 no-click-effect-section",style:{"background-color":"#ccc"}},m(t.options[l]),9,Lt)):(i(),o("button",{key:1,onClick:h=>t.submitAnswer(n.questionLists[t.indexPage].question_id,s),class:"btn btn-secondary px-lg-5 px-md-5 mb-1 rounded-3 mx-1 text-dark no-click-effect-section",style:{"background-color":"#ccc"}},m(t.options[l]),9,St))]))),128))])):r("",!0),a("div",Tt,[a("div",At,[a("div",Bt,[n.exam.show_prev_next_button==1?(i(),o("div",It,[t.indexPage>0?(i(),o("button",{key:0,onClick:e[1]||(e[1]=s=>t.prevPage()),type:"button",class:"btn btn-danger btn-md border-0 shadow",style:{width:"9vh"}}," << ")):r("",!0),e[15]||(e[15]=C(" \xA0 ")),t.indexPage<Object.keys(n.questionLists).length-1?(i(),o("button",{key:1,onClick:e[2]||(e[2]=s=>t.nextPage()),type:"button",class:"btn btn-danger btn-md border-0 shadow",style:{width:"9vh"}}," >> ")):r("",!0)])):r("",!0)]),n.exam.show_question_number_navigation==0?(i(),o("div",Ot,[n.exam.button_type_finish==1?(i(),o("div",jt,[n.section==n.lastSection?(i(),o("button",{key:0,onClick:e[3]||(e[3]=s=>t.showModalEndExam=!0),class:"btn btn-danger btn-md border-0 shadow w-100"}," Akhiri Try Out ")):(i(),o("button",{key:1,onClick:e[4]||(e[4]=(...s)=>t.endExam&&t.endExam(...s)),class:"btn btn-danger btn-md border-0 shadow w-100"}," Lanjut Bagian Berikutnya "))])):(i(),o("div",qt,[n.section==n.lastSection&&t.indexPage>=Object.keys(n.questionLists).length-1?(i(),o("button",{key:0,onClick:e[5]||(e[5]=s=>t.showModalEndExam=!0),class:"btn btn-danger btn-md border-0 shadow w-100"}," Akhiri Try Out ")):r("",!0),n.section<n.lastSection&&t.indexPage>=Object.keys(n.questionLists).length-1?(i(),o("button",{key:1,onClick:e[6]||(e[6]=(...s)=>t.endExam&&t.endExam(...s)),class:"btn btn-danger btn-md border-0 shadow w-100"}," Lanjut Bagian Berikutnya ")):r("",!0)]))])):r("",!0)])])])],2),n.exam.show_question_number_navigation==1?(i(),o("div",{key:0,class:w(["col-md-12 col-sm-12 col-xs-12",{"col-lg-4":n.exam.show_question_number_navigation==1}])},[a("div",Pt,[e[16]||(e[16]=a("div",{class:"card-header text-white bg-primary"},[a("div",{class:"d-flex justify-content-between"},[a("div",null,[a("h5",{class:"mb-0 text-white"},"Navigasi Soal")])])],-1)),a("div",Nt,[(i(!0),o(y,null,v(n.questionLists,(s,l)=>(i(),o("div",{key:l},[a("div",Jt,[a("div",Ht,[l==t.indexPage?(i(),o("button",{key:0,onClick:h=>t.clickQuestion(l),class:"btn btn-primary w-100"},[a("span",Qt,m(s.navigation_order),1)],8,Dt)):r("",!0),l!=t.indexPage&&t.getMyAnswer(s.question_id)==0?(i(),o("button",{key:1,onClick:h=>t.clickQuestion(l),class:"btn btn-light w-100"},[a("span",Kt,m(s.navigation_order),1)],8,Rt)):r("",!0),l!=t.indexPage&&t.getMyAnswer(s.question_id)!=0?(i(),o("button",{key:2,onClick:h=>t.clickQuestion(l),class:"btn btn-danger w-100"},[a("span",Vt,m(s.navigation_order),1)],8,Ut)):r("",!0)])])]))),128))]),a("div",zt,[n.exam.button_type_finish==1?(i(),o("div",Yt,[n.section==n.lastSection?(i(),o("button",{key:0,onClick:e[7]||(e[7]=s=>t.showModalEndExam=!0),class:"btn btn-danger btn-md border-0 shadow w-100"}," Akhiri Try Out ")):(i(),o("button",{key:1,onClick:e[8]||(e[8]=(...s)=>t.endExam&&t.endExam(...s)),class:"btn btn-danger btn-md border-0 shadow w-100"}," Lanjut Bagian Berikutnya "))])):(i(),o("div",Ft,[n.section==n.lastSection&&t.indexPage>=Object.keys(n.questionLists).length-1?(i(),o("button",{key:0,onClick:e[9]||(e[9]=s=>t.showModalEndExam=!0),class:"btn btn-danger btn-md border-0 shadow w-100"}," Akhiri Try Out ")):r("",!0),n.section<n.lastSection&&t.indexPage>=Object.keys(n.questionLists).length-1?(i(),o("button",{key:1,onClick:e[10]||(e[10]=(...s)=>t.endExam&&t.endExam(...s)),class:"btn btn-danger btn-md border-0 shadow w-100"}," Lanjut Bagian Berikutnya ")):r("",!0)]))])])],2)):r("",!0)])]),t.showModalEndExam?(i(),o("div",{key:0,class:w(["modal fade",{show:t.showModalEndExam}]),tabindex:"-1","aria-hidden":"true",style:{display:"block"},role:"dialog"},[a("div",Gt,[a("div",Wt,[e[17]||(e[17]=a("div",{class:"modal-header"},[a("h5",{class:"modal-title"},"Akhiri Try Out ?")],-1)),e[18]||(e[18]=a("div",{class:"modal-body"}," Setelah mengakhiri Try Out, Anda tidak dapat kembali ke Try Out ini lagi. Yakin akan mengakhiri Try Out? ",-1)),a("div",Xt,[a("button",{onClick:e[11]||(e[11]=(...s)=>t.endExam&&t.endExam(...s)),type:"button",class:"btn btn-danger",style:{width:"6rem"}}," Ya "),a("button",{onClick:e[12]||(e[12]=s=>t.showModalEndExam=!1),type:"button",class:"btn btn-secondary",style:{width:"6rem"}}," Tidak ")])])])],2)):r("",!0),t.showModalEndTimeExam?(i(),o("div",{key:1,class:w(["modal fade",{show:t.showModalEndTimeExam}]),"data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-hidden":"true",style:{display:"block","z-index":"9999"},role:"dialog"},[a("div",Zt,[a("div",pt,[a("div",$t,[n.section==n.lastSection?(i(),o("h5",te," Waktu Habis ! ")):(i(),o("h5",ee," Lanjut ke bagian selanjutnya dalam hitungan : "))]),a("div",ne,[n.section==n.lastSection?(i(),o("div",ae,e[19]||(e[19]=[C(" Waktu Try Out sudah berakhir!. Klik "),a("strong",{class:"fw-bold"},"Ya",-1),C(" untuk mengakhiri Try Out. ")]))):(i(),o("div",oe,[a("div",ie,[S(k,{time:5e3,onProgress:t.handleChangeDuration,onEnd:t.endExam},{default:T(({hours:s,minutes:l,seconds:h})=>[a("h2",se,[a("span",de,m(h),1)])]),_:1},8,["onProgress","onEnd"])])]))]),n.section==n.lastSection?(i(),o("div",le,[a("button",{onClick:e[13]||(e[13]=(...s)=>t.endExam&&t.endExam(...s)),type:"button",class:"btn btn-primary"}," Ya ")])):r("",!0)])])],2)):r("",!0)],64)}const ke=Z(p,[["render",re]]);export{ke as default};
