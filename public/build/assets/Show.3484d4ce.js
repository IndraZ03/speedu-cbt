import{L as k}from"./Layout.eab09853.js";import{L as g,H as h,j as w,c as o,a as _,w as d,b as s,d as T,e as l,K as x,F as b,r as L,h as f,f as v,o as e,t as r,g as y}from"./app.5a3a2595.js";import{S}from"./sweetalert2.esm.all.36649896.js";import{_ as P}from"./_plugin-vue_export-helper.cdc0426e.js";const H={layout:k,components:{Link:g,Head:h},props:{errors:Object,transaction:Object,banks:Object,payment_confirmation:Object},setup(n){const t=w({payment_method:""});return{form:t,submit:()=>{f.Inertia.post(`/user/vouchers/${n.voucher.id}/buy`,{payment_method:t.payment_method},{onSuccess:()=>{S.fire({title:"Success!",text:"Silakan Lakukan Pembayaran",icon:"success",showConfirmButton:!1,timer:1e3})}})},pay:()=>{window.snap.pay(n.transaction.snap_token,{onSuccess:()=>{f.Inertia.post("/user/account-balances/pay",{transaction_id:n.transaction.id,payment_method:"automatic_transfer_midtrans"})},onPending:()=>{this.$inertia.reload()},onError:()=>{this.$inertia.visit($page.props.setting.app_url)}})}}},methods:{formatPrice(n){return"Rp."+(n/1).toFixed(2).replace(".",",").toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}}},B={class:"page-wrapper"},C={class:"page-content"},D={class:"row"},K={class:"col-lg-12"},M={key:0,class:"alert alert-danger border-0 alert-dismissible fade show"},N=["innerHTML"],j={key:1,class:"alert alert-danger border-0 alert-dismissible fade show"},O=["innerHTML"],V={key:2,class:"alert alert-success border-0 alert-dismissible fade show"},A=["innerHTML"],E={class:"col-lg-12"},F={class:"card border-top border-0 border-3 border-primary"},I={class:"card-header"},R={class:"d-lg-flex align-items-center"},G={class:"ms-auto"},J={class:"card-body p-4"},W={class:"row mb-3"},q={class:"col-sm-9"},z=["value"],Q={class:"row mb-3"},U={class:"col-sm-9"},X=["value"],Y={class:"row mb-3"},Z={class:"col-sm-9"},$=["value"],ss={class:"row mb-3"},ts={class:"col-sm-9"},as=["value"],es={class:"row mb-3"},os={class:"col-sm-9"},ns=["value"],ls={class:"row mb-3"},is={class:"col-sm-9"},rs=["value"],cs={class:"row mb-3"},ds={class:"col-sm-9"},ms={class:"form-select",disabled:"",style:{"background-color":"#fff"}},us=["selected"],_s=["selected"],bs={class:"row mb-3"},fs={class:"col-sm-9"},vs=["value"],ys={class:"row mb-3"},ps={class:"col-sm-9"},ks={key:0,class:"fw-bold"},gs={key:1,class:"fw-bold"},hs={key:2,class:"fw-bold"},ws={key:3,class:"fw-bold"},Ts={key:4,class:"fw-bold"},xs={key:0,class:"row mb-3"},Ls={class:"col-sm-9"},Ss={key:1},Ps={class:"row mb-3"},Hs={class:"col-sm-9"},Bs=["value"],Cs={class:"row mb-3"},Ds={class:"col-sm-9"},Ks=["value"],Ms={class:"row mb-3"},Ns={class:"col-sm-9"},js=["value"],Os={class:"row mb-3"},Vs={class:"col-sm-9"},As=["value"],Es={class:"row mb-3"},Fs={class:"col-sm-9"},Is=["src"],Rs={key:2,class:"row"},Gs={class:"col-lg-12"},Js={class:"row row-cols-1 row-cols-md-2 row-cols-lg-3 row-cols-xl-3 g-4"},Ws={class:"col"},qs={class:"card h-100 shadow-sm"},zs={class:"card-body d-flex flex-column p-4"},Qs={class:"text-center mb-4"},Us=["src","alt"],Xs={class:"text-center mt-auto"},Ys={class:"card-title mb-3 fw-bold"},Zs={class:"card-text mb-2 text-muted"},$s={class:"card-text mb-0 fw-semibold"};function st(n,t,a,c,tt,m){const p=v("Head"),u=v("Link");return e(),o(b,null,[_(p,null,{default:d(()=>{var i;return[s("title",null,`
            `+r((i=n.$page.props.setting.app_name)!=null?i:"Atur Setting Terlebih Dahulu")+`
            - Transaksi
        `,1)]}),_:1}),s("div",B,[s("div",C,[t[26]||(t[26]=T('<div class="page-breadcrumb d-none d-sm-flex align-items-center mb-3"><div class="breadcrumb-title pe-3">Transaksi</div><div class="ps-3"><nav aria-label="breadcrumb"><ol class="breadcrumb mb-0 p-0"><li class="breadcrumb-item"><a href="javascript:;"><i class="bx bx-home-alt"></i></a></li><li class="breadcrumb-item active" aria-current="page"> Detail Transaksi </li></ol></nav></div></div>',1)),s("div",D,[s("div",K,[n.$page.props.session.failed?(e(),o("div",M,[s("div",{innerHTML:n.$page.props.session.failed},null,8,N),t[1]||(t[1]=s("button",{type:"button",class:"btn-close","data-bs-dismiss":"alert","aria-label":"Close"},null,-1))])):l("",!0),n.$page.props.session.error?(e(),o("div",j,[s("div",{innerHTML:n.$page.props.session.error},null,8,O),t[2]||(t[2]=s("button",{type:"button",class:"btn-close","data-bs-dismiss":"alert","aria-label":"Close"},null,-1))])):l("",!0),n.$page.props.session.success?(e(),o("div",V,[s("div",{innerHTML:n.$page.props.session.success},null,8,A),t[3]||(t[3]=s("button",{type:"button",class:"btn-close","data-bs-dismiss":"alert","aria-label":"Close"},null,-1))])):l("",!0)]),s("div",E,[s("div",F,[s("div",I,[s("div",R,[s("div",G,[a.transaction.transaction_status=="pending"&&a.transaction.payment_method=="manual_transfer"?(e(),x(u,{key:0,href:`/user/account-balances/${a.transaction.id}/payment-confirmations`,class:"btn btn-danger btn-sm mt-lg-0 mx-1"},{default:d(()=>t[4]||(t[4]=[y("Konfirmasi Pembayaran")])),_:1},8,["href"])):l("",!0),_(u,{href:"/user/account-balances",class:"btn btn-primary btn-sm mt-lg-0"},{default:d(()=>t[5]||(t[5]=[y(" Kembali ")])),_:1})])])]),s("div",J,[t[24]||(t[24]=s("h5",{class:"mb-3"},"Data Pembeli",-1)),s("div",W,[t[6]||(t[6]=s("label",{class:"col-sm-3 col-form-label"},"Nama Lengkap",-1)),s("div",q,[s("input",{type:"text",class:"form-control",value:a.transaction.user.name,disabled:"",style:{"background-color":"#fff"}},null,8,z)])]),s("div",Q,[t[7]||(t[7]=s("label",{class:"col-sm-3 col-form-label"},"Email",-1)),s("div",U,[s("input",{type:"text",class:"form-control",value:a.transaction.user.email,disabled:"",style:{"background-color":"#fff"}},null,8,X)])]),s("div",Y,[t[8]||(t[8]=s("label",{class:"col-sm-3 col-form-label"},"Nomor Telepon (Whatsapp)",-1)),s("div",Z,[s("input",{type:"text",class:"form-control",value:a.transaction.user.student&&a.transaction.user.student.phone_number?a.transaction.user.student.phone_number:"-",disabled:"",style:{"background-color":"#fff"}},null,8,$)])]),t[25]||(t[25]=s("h5",{class:"mb-3"},"Detail Transaksi",-1)),s("div",ss,[t[9]||(t[9]=s("label",{class:"col-sm-3 col-form-label"},"Kode Transaksi",-1)),s("div",ts,[s("input",{type:"text",class:"form-control",value:a.transaction.code,disabled:"",style:{"background-color":"#fff"}},null,8,as)])]),s("div",es,[t[10]||(t[10]=s("label",{class:"col-sm-3 col-form-label"},"Tanggal Transaksi",-1)),s("div",os,[s("input",{type:"text",class:"form-control",value:a.transaction.created_at,disabled:"",style:{"background-color":"#fff"}},null,8,ns)])]),s("div",ls,[t[11]||(t[11]=s("label",{class:"col-sm-3 col-form-label"},"Deskripsi Transaksi",-1)),s("div",is,[s("input",{type:"text",class:"form-control",value:a.transaction.description,disabled:"",style:{"background-color":"#fff"}},null,8,rs)])]),s("div",cs,[t[12]||(t[12]=s("label",{class:"col-sm-3 col-form-label"},"Metode Pembayaran",-1)),s("div",ds,[s("select",ms,[s("option",{value:"manual_transfer",selected:a.transaction.payment_method=="manual_transfer"}," Transfer Manual (Konfirmasi Pembayaran) ",8,us),s("option",{value:"automatic_transfer_midtrans",selected:a.transaction.payment_method=="automatic_transfer_midtrans"}," Transfer Otomatis ",8,_s)])])]),s("div",bs,[t[13]||(t[13]=s("label",{class:"col-sm-3 col-form-label"},"Total Transaksi",-1)),s("div",fs,[s("input",{type:"text",class:"form-control",value:m.formatPrice(a.transaction.top_up_balance),disabled:"",style:{"background-color":"#fff"}},null,8,vs)])]),s("div",ys,[t[14]||(t[14]=s("label",{class:"col-sm-3 col-form-label"},"Status Transaksi",-1)),s("div",ps,[a.transaction.transaction_status=="pending"?(e(),o("span",ks,"Pending - Belum melakukan pembayaran")):l("",!0),a.transaction.transaction_status=="paid"?(e(),o("span",gs,"Telah melakukan pembayaran")):l("",!0),a.transaction.transaction_status=="failed"?(e(),o("span",hs,"Transaksi Gagal")):l("",!0),a.transaction.transaction_status=="done"?(e(),o("span",ws,"Transaksi Selesai")):l("",!0),a.transaction.transaction_status=="expired"?(e(),o("span",Ts,"Transaksi Kadaluarsa")):l("",!0)])]),a.transaction.payment_method=="automatic_transfer_midtrans"&&a.transaction.transaction_status=="pending"?(e(),o("div",xs,[t[15]||(t[15]=s("label",{class:"col-sm-3 col-form-label"},"Action",-1)),s("div",Ls,[s("button",{onClick:t[0]||(t[0]=(...i)=>c.pay&&c.pay(...i)),class:"btn btn-primary btn-sm"}," Bayar Transaksi Sekarang ")])])):l("",!0),a.transaction.payment_method=="manual_transfer"&&a.payment_confirmation!==null?(e(),o("div",Ss,[t[21]||(t[21]=s("h5",{class:"mb-3"},"Data Konfirmasi Pembayaran",-1)),s("div",Ps,[t[16]||(t[16]=s("label",{class:"col-sm-3 col-form-label"},"Nama Pengirim Transfer",-1)),s("div",Hs,[s("input",{type:"text",class:"form-control",value:a.payment_confirmation.rekening_name,disabled:"",style:{"background-color":"#fff"}},null,8,Bs)])]),s("div",Cs,[t[17]||(t[17]=s("label",{class:"col-sm-3 col-form-label"},"Di Transfer Ke Rekening",-1)),s("div",Ds,[s("input",{type:"text",class:"form-control",value:a.payment_confirmation.bank.bank_name+" - "+a.payment_confirmation.bank.rekening_number+" - "+a.payment_confirmation.bank.rekening_name,disabled:"",style:{"background-color":"#fff"}},null,8,Ks)])]),s("div",Ms,[t[18]||(t[18]=s("label",{class:"col-sm-3 col-form-label"},"Tanggal Transfer",-1)),s("div",Ns,[s("input",{type:"text",class:"form-control",value:a.payment_confirmation.transfer_date,disabled:"",style:{"background-color":"#fff"}},null,8,js)])]),s("div",Os,[t[19]||(t[19]=s("label",{class:"col-sm-3 col-form-label"},"Jumlah Transfer",-1)),s("div",Vs,[s("input",{type:"text",class:"form-control",value:m.formatPrice(a.payment_confirmation.total_payment),disabled:"",style:{"background-color":"#fff"}},null,8,As)])]),s("div",Es,[t[20]||(t[20]=s("label",{class:"col-sm-3 col-form-label"},"Bukti Transfer",-1)),s("div",Fs,[s("img",{src:"/storage/upload_files/payment_confirmation/"+a.payment_confirmation.file,style:{width:"300px"}},null,8,Is)])])])):l("",!0),a.transaction.payment_method=="manual_transfer"&&a.transaction.transaction_status=="pending"?(e(),o("div",Rs,[s("div",Gs,[t[22]||(t[22]=s("h6",{class:"text-center"}," Silakan lakukan pembayaran melalui rekening berikut ini dan lakukan konfirmasi ",-1)),t[23]||(t[23]=s("br",null,null,-1)),s("div",Js,[(e(!0),o(b,null,L(a.banks,i=>(e(),o("div",Ws,[s("div",qs,[s("div",zs,[s("div",Qs,[s("img",{src:"/storage/upload_files/banks/"+i.image,class:"img-fluid",style:{"max-height":"75px","max-width":"125px","object-fit":"contain"},alt:i.bank_name},null,8,Us)]),s("div",Xs,[s("h6",Ys,r(i.bank_name),1),s("p",Zs,r(i.rekening_number),1),s("p",$s,r(i.rekening_name),1)])])])]))),256))])])])):l("",!0)])])])])])])],64)}const lt=P(H,[["render",st]]);export{lt as default};
